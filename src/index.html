<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ReBook</title>
    <script type="module" src="/main.js" defer></script>
  </head>

  <body>
    <div class="app-container">
      <!-- Left Panel: Library -->
      <aside id="left-panel" class="panel library-panel">
        <div class="panel-header">
          <h1 class="brand-title">ReBook</h1>
          <button id="toggle-left" class="icon-button" title="Toggle Library">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-library"><path d="m16 6 4 14"/><path d="M12 6v14"/><path d="M8 8v12"/><path d="M4 4v16"/></svg>
          </button>
        </div>
        
        <div class="panel-content">
          <button id="import-trigger" class="add-book-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
            <span>Add Book</span>
          </button>
          <input id="epub-input" type="file" accept=".epub" hidden />
          <div id="book-grid" class="book-list"></div>
        </div>
      </aside>

      <!-- Main Area: Reader -->
      <main id="main-area" class="reader-area">
        <div class="reader-content">
          <div id="reader-text" class="reader-text-container">
            <div class="empty-state">
              <div class="empty-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
              </div>
              <p>Select a book to start reading</p>
            </div>
          </div>
        </div>

        <button id="read-selection" class="read-selection-btn" type="button" hidden>Read from here</button>

        <div class="reader-controls-wrapper">
          <div class="playback-bar">
            <div class="playback-actions">
              <button id="reader-prev" class="nav-button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
              </button>
              <button id="reader-play" class="play-button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play"><polygon points="6 3 20 12 6 21 6 3"/></svg>
              </button>
              <button id="reader-next" class="nav-button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right"><path d="m9 18 6-6-9-6"/></svg>
              </button>
            </div>

            <div class="playback-progress">
              <span id="playback-time" class="time-label">Page 0 / 0</span>
              <div class="progress-track">
                <div id="playback-progress-fill" class="progress-fill" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Right Panel: Voice Config -->
      <aside id="right-panel" class="panel voice-panel">
        <div class="panel-header">
          <button id="toggle-right" class="icon-button" title="Toggle Voices">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings2"><path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/></svg>
          </button>
          <h2 class="panel-title">Voice Profile</h2>
        </div>

        <div class="panel-content">
          <div class="voice-section">
            <p class="section-label">Active Voices</p>
            <div id="voice-list" class="voice-list"></div>
          </div>

          <div class="voice-setup">
            <button id="voice-create-toggle" class="clone-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
              <span>Create New Voice</span>
            </button>

            <div id="voice-create" class="voice-create-form" hidden>
              <div class="form-header">
                <span class="form-title">New Voice</span>
              </div>

              <div class="field">
                <label>Provider</label>
                <select id="voice-provider">
                  <option value="minimax">Minimax</option>
                  <option value="elevenlabs">Eleven Labs</option>
                </select>
              </div>

              <div class="field">
                <label>Voice Name</label>
                <input id="voice-name" type="text" placeholder="Author Name" />
              </div>

              <div class="voice-actions-grid">
                <button id="voice-record-btn" class="action-tile" type="button">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#D4A373" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mic"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                  <span id="record-btn-text">Record</span>
                </button>
                <button class="action-tile" onclick="document.getElementById('voice-file').click()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#D4A373" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-upload"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                  <span>Upload</span>
                </button>
                <input id="voice-file" type="file" accept=".mp3,.m4a,.wav" hidden />
              </div>
              <div class="file-preview-container">
                <div id="voice-file-name" class="file-name-hint">Upload or record ~30 seconds of clean audio</div>
                <button id="voice-playback-btn" class="playback-btn" type="button" hidden>
                  <svg id="playback-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play"><polygon points="6 3 20 12 6 21 6 3"/></svg>
                </button>
              </div>

              <button id="voice-clone" class="train-btn">Start Creation</button>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </body>
</html>
